version: 1.0-preview
stepTimeout: 1200
steps:
  - cmd: docker build -t {{.Run.Registry}}/javamodule:0.0.1-arm32v7 -f /workspace/modules/javaModule/Dockerfile.arm32v7 --platform linux/arm/v7 /workspace/modules/javaModule
  - cmd: docker build -t {{.Run.Registry}}/csharpmodule:0.0.1-arm32v7 -f /workspace/modules/csharpModule/Dockerfile.arm32v7 --platform linux/arm/v7 /workspace/modules/csharpModule
  - cmd: docker build -t {{.Run.Registry}}/functionmodule:0.0.1-arm32v7 -f /workspace/modules/functionModule/Dockerfile.arm32v7 --platform linux/arm/v7 /workspace/modules/functionModule
  - cmd: docker build -t {{.Run.Registry}}/nodemodule:0.0.1-arm32v7 -f /workspace/modules/nodeModule/Dockerfile.arm32v7 --platform linux/arm/v7 /workspace/modules/nodeModule
  - cmd: docker build -t {{.Run.Registry}}/pythonmodule:0.0.1-arm32v7 -f /workspace/modules/pythonModule/Dockerfile.arm32v7 --platform linux/arm/v7 /workspace/modules/pythonModule
  - push:
    - {{.Run.Registry}}/csharpmodule:0.0.1-arm32v7
    - {{.Run.Registry}}/functionmodule:0.0.1-arm32v7
    - {{.Run.Registry}}/nodemodule:0.0.1-arm32v7
    - {{.Run.Registry}}/pythonmodule:0.0.1-arm32v7
    - {{.Run.Registry}}/javamodule:0.0.1-arm32v7
